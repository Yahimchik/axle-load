package com.mehatronics.axle_load.data.service;

import android.bluetooth.BluetoothGatt;

/**
 * Интерфейс для записи команд и данных в BLE-устройство через GATT.
 * <p>
 * Определяет методы для формирования команды, управления буфером и выполнения записи.
 */
public interface GattWriteService {

    /**
     * Устанавливает команду в буфер.
     * <p>
     * Первые два байта буфера заполняются значениями {@code c1} и {@code c2},
     * после чего может быть применена дополнительная логика формирования пакета.
     *
     * @param c1 первый байт команды
     * @param c2 второй байт команды
     */
    void setCommand(int c1, int c2);

    /**
     * Возвращает текущий буфер с подготовленными для отправки данными.
     *
     * @return массив байт, готовый к записи в характеристику BLE
     */
    byte[] getBuffer();

    /**
     * Очищает буфер, заполняя его нулями.
     * <p>
     * Используется перед формированием новой команды или при сбросе состояния.
     */
    void clearBuffer();

    /**
     * Записывает содержимое буфера в BLE-устройство через GATT.
     * <p>
     * Использует заданные UUID сервиса и характеристики для отправки данных.
     *
     * @param gatt активное GATT-соединение с устройством
     */
    void write(BluetoothGatt gatt);
}